<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Онлайн диагностика</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px; }
        .section { margin-bottom: 30px; }
        .subsection { margin-left: 20px; }
        .button { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Онлайн диагностика</h1>
    <p>Заполните форму ниже, чтобы оценить развитие вашего ребенка. После заполнения вы сможете скачать результаты в PDF.</p>

    <form id="diagnosticForm">
        <!-- Основные данные -->
        <div class="section">
            <h3>Основные данные</h3>
            <div class="subsection">
                Пол: 
                <select name="gender">
                    <option value="Выберите пол">Выберите пол</option>
                    <option>Женский</option>
                    <option>Мужской</option>
                </select>
                <br>
                Беременность: 
                <select name="pregnancy">
                    <option value="Выберите вариант">Выберите вариант</option>
                    <option>Без проблем</option>
                    <option>Была угроза (кровотечения, заболевания и т.д.)</option>
                    <option>Болела простудами</option>
                </select>
            </div>
        </div>

        <!-- Роды -->
        <div class="section">
            <h3>Роды</h3>
            <div class="subsection">
                Как проходила беременность? 
                <select name="pregnancy_condition">
                    <option value="Выберите вариант">Выберите вариант</option>
                    <option>Без проблем</option>
                    <option>Была угроза (кровотечения, заболевания и т.д.)</option>
                    <option>Болела простудами</option>
                </select>
                <br>
                Как проходили роды? 
                <select name="birth">
                    <option value="Выберите вариант">Выберите вариант</option>
                    <option>Нормально, в срок самостоятельно</option>
                    <option>Раньше времени на 1-2 мес.</option>
                    <option>Не все гладко (обвитие, выдавливание и т.д.)</option>
                </select>
            </div>
        </div>

        <!-- Развитие до года -->
        <div class="section">
            <h3>Развитие до года</h3>
            <div class="subsection">
                Были тонусные нарушения или кривошея? 
                <select name="muscle_issues">
                    <option value="Выберите вариант">Выберите вариант</option>
                    <option>Нет</option>
                    <option>Да - гипертонус</option>
                    <option>Да - гипотонус</option>
                </select>
                <br>
                Часто болел простудами? 
                <select name="cold_frequency">
                    <option value="Выберите вариант">Выберите вариант</option>
                    <option>Да</option>
                    <option>Нет</option>
                    <option>Иногда</option>
                </select>
            </div>
        </div>

        <!-- Моторное развитие -->
        <div class="section">
            <h3>Моторное развитие</h3>
            <div class="subsection">
                <label><input type="radio" name="sat_6-7" value="Да"> Сел в 6-7 месяцев?</label>
                <label><input type="radio" name="sat_6-7" value="Нет"> Нет</label>
                <br>
                <label><input type="radio" name="stood_support_7-8" value="Да"> Встал с поддержкой в 7-8 месяцев?</label>
                <label><input type="radio" name="stood_support_7-8" value="Нет"> Нет</label>
                <br>
                <!-- Остальные моторные вопросы -->
            </div>
        </div>

        <!-- Остальные разделы аналогично -->

        <button type="button" onclick="generatePDF()">Скачать результаты</button>
    </form>

    <script>
        function generatePDF() {
            const form = document.getElementById('diagnosticForm');
            const data = new FormData(form);
            
            const pdf = new jsPDF({
                orientation: 'portrait',
                unit: 'mm',
                format: 'a4'
            });
            
            pdf.addFileToVFS('DejaVuSansCondensed.ttf', 
                'JVBERi0xLjUKJeLjz9MKNj...'); // Полный шрифт здесь (сокращено для примера)
            
            pdf.addFont('DejaVuSansCondensed.ttf', 'DejaVu', 'normal');
            pdf.setFont('DejaVu');
            
            pdf.text('Диагностический отчет', 15, 20);
            let yPos = 30;
            
            for (const entry of data.entries()) {
                pdf.text(`${entry[0]}: ${entry[1]}`, 15, yPos);
                yPos += 6;
            }
            
            pdf.save('diagnostic_report.pdf');
        }
    </script>
</body>
</html>
